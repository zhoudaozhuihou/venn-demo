# 数据关系可视化

基于 React 的数据关系可视化应用，用于展示不同类型数据节点之间的连接关系。

## 项目架构

- **前端框架**：React 17
- **UI 组件**：Material-UI v4
- **可视化引擎**：ECharts 5
- **响应式设计**：支持各种屏幕尺寸

## 数据结构设计

### 节点类型
- **数据平台（DataPlatform）**：中央数据处理系统（蓝色）
- **源节点（Source）**：数据来源系统（绿色）
- **下游节点（Downstream）**：消费数据的应用（粉色）
- **混合节点（Mixed）**：同时作为源节点和下游节点的系统（紫色）

### 布局设计
- **三列布局**：
  - 左侧：源节点（多层环形布局，8层）
  - 中间：数据平台节点（单层圆形布局）
  - 右侧：下游节点（多层环形布局，9层）
- **动态节点大小**：根据连接数量动态调整节点大小
- **自适应布局**：根据屏幕尺寸自动调整

### 视觉特性
- **颜色编码**：不同类型节点使用不同颜色
- **节点大小**：反映连接重要性
- **半透明曲线连接线**：显示节点间关系
- **悬停效果**：突出显示相关节点
- **连接线优化**：根据连接数量调整线条宽度和透明度

## 交互功能
- **节点工具提示**：显示详细信息
- **悬停高亮**：高亮显示连接的节点
- **响应式设计**：适应不同屏幕尺寸
- **多布局切换**：支持多种图表布局方式

## Venn 网络布局

### 特点
- **多层环形布局**：源节点和下游节点分别使用多层环形布局，减少重叠
- **动态连接线**：根据连接重要性调整线条样式
- **大规模节点支持**：优化支持 250+ 源节点和 350+ 下游节点
- **平台间连接**：显示数据平台之间的关系
- **连接筛选**：只显示重要连接，减少视觉混乱

### 性能优化
- **分层渲染**：减少重叠提高可读性
- **动态节点大小**：根据表数量调整节点大小
- **随机微偏移**：避免节点完全对齐造成的视觉重叠

## 开始使用

1. 安装依赖：
   ```
   npm install
   ```

2. 启动开发服务器：
   ```
   npm start
   ```

3. 生产环境构建：
   ```
   npm run build
   ```

## 项目结构

```
src/
├── components/         # React 组件
│   ├── RelationshipGraph.js    # 主要图表组件
│   └── ...            # 其他 UI 组件
├── utils/             # 工具函数
│   ├── chartOptions.js # ECharts 配置生成
│   └── mockData.js    # 模拟数据生成
├── App.js             # 应用入口
└── index.js           # 渲染入口
```

## 数据模型

### 源节点数据结构
```javascript
{
  source_application_name: String,  // 应用名称
  data_platform: String,            // 数据平台
  source_table_count: Number        // 表数量
}
```

### 下游节点数据结构
```javascript
{
  downstream_application_name: String,  // 应用名称
  data_platform: String,                // 数据平台
  downstream_table_count: Number        // 表数量
}
```

## 未来计划

- 添加更多布局选项
- 支持数据筛选和搜索
- 增加节点分组功能
- 优化大规模数据集的性能
- 添加数据导出功能
